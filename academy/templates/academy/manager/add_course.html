{% extends "base.html" %}
{% load static %}

{% block title %}Add Course{% endblock %}
{% block nav_academy_active %}active{% endblock %}

{% block content %}

<div class="row justify-content-center my-5">
    <div class="col-lg-7">
        <div class="cozy-dark-glass p-4">

            <div class="d-flex justify-content-between mb-3">
                <h2 class="text-light">
                    <i class="fa-solid fa-plus text-warning me-2"></i> Create New Course
                </h2>
                <a href="{% url 'academy_manager_tools' %}" class="btn btn-outline-light btn-sm">
                    <i class="fa-solid fa-arrow-left me-1"></i> Back
                </a>
            </div>

            <form method="post">
                {% csrf_token %}

                <!-- Course Title -->
                <div class="mb-3">
                    <label class="form-label text-light fw-bold">Course Title</label>
                    {{ form.title }}
                </div>

                <!-- Auto slug (JS updates it automatically) -->
                <div class="mb-3">
                    <label class="form-label text-light fw-bold">Slug</label>
                    {{ form.slug }}
                    <div class="form-text text-light">Automatically generated from title.</div>
                </div>

                <!-- Description -->
                <div class="mb-3">
                    <label class="form-label text-light fw-bold">Description</label>
                    {{ form.description }}
                </div>

                <!-- Order -->
                <div class="mb-3">
                    <label class="form-label text-light fw-bold">Display Order</label>
                    {{ form.order }}
                </div>

                <!-- Active checkbox -->
                <div class="form-check mb-4">
                    {{ form.is_active }}
                    <label class="form-check-label text-light ms-2 fw-bold">
                        Course is Active
                    </label>
                </div>

                <!-- Save -->
                <button class="btn btn-success w-100 fw-bold py-2">
                    <i class="fa-solid fa-check me-2"></i> Save Course
                </button>
            </form>

        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", () => {
    const titleInput = document.querySelector("#id_title");
    const slugInput = document.querySelector("#id_slug");

    function slugify(text) {
        return text.toString().toLowerCase()
            .replace(/\s+/g, "-")
            .replace(/[^a-z0-9-]/g, "")
            .replace(/--+/g, "-")
            .replace(/^-+|-+$/g, "");
    }

    titleInput.addEventListener("input", () => {
        slugInput.value = slugify(titleInput.value);
    });
});
</script>
{% endblock %}
